<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../misc/favicon.ico"/>
    <title>MSP430 Ports - scmRTOS</title>
    <style type="text/css">/*<![CDATA[*/ @import "../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../skins/common/commonPrint.css" />
          </head>
  <body
    class="ns-4 ns-subject page-scmRTOS_About">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">MSP430 Ports</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From scmRTOS</h3>
	    <div id="contentSub"></div>
	    <!-- start content -->
	    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="charset=utf-8"></head>
<body>
<table id="toc" class="toc"><tr><td>
<div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#General"><span class="tocnumber">1</span> <span class="toctext">General</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Program_Control_Flow_Transfer"><span class="tocnumber">2</span> <span class="toctext">Program Control Flow Transfer</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Interrupts"><span class="tocnumber">3</span> <span class="toctext">Interrupts</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#System_Timer"><span class="tocnumber">4</span> <span class="toctext">System Timer</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Port_implementations"><span class="tocnumber">5</span> <span class="toctext">Port implementations</span></a></li>
</ul>
</td></tr></table>
<script>if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script><h2> <span class="mw-headline" id="General"> General </span>
</h2>
<p>MSP430 is 16-bit RISC von Neumann processor from Texas Instruments. MSP430 processor has 16 main registers:
</p>
<ul>
<li> 1 Program Counter register (PC);
</li>
<li> 1 Status Register (SR);
</li>
<li> 1 Stack Pointer register (SP);
</li>
<li> 1 Constant Generator register (CG);
</li>
<li> 12 general purpose registers (GPR).
</li>
</ul>
<p>Therefore, context in the processor consists of:
</p>
<pre>   12 (GPR) + 1 (SR) + 1 (SP) = 14 registers or 14*2 = 28 bytes.
</pre>
<p>This means that each user's process must have stack at least context size (28 bytes) + call depth multiplied by 2.
</p>
<p>The Port uses one common stack for data and return addresses.
</p>
<h2> <span class="mw-headline" id="Program_Control_Flow_Transfer"> Program Control Flow Transfer </span>
</h2>
<p>Both methods - direct and software interrupt - are supported in the port.
</p>
<p>In case of direct program control flow transfer there are no any peculiarities.
</p>
<p><span>In case of software interrupt program control flow transfer a situation is the following: unfortunately, MSP430 has no special software interrupt, therefore, one of hardware interrupts has been used. Any port release has default Software Context Switch interrupt assignment. The user can leave this default assignment or override it in project-dependent part of the <span title="RTOS: Real Time Operating System;" class="terminologydef" style="cursor:help">RTOS</span> - scmRTOS_TARGET_CFG.h header file.
</span></p>
<h2> <span class="mw-headline" id="Interrupts"> Interrupts </span>
</h2>
<p>The using of interrupts with scmRTOS does not make any special demands. The user should keep in mind two things:
</p>
<ul>
<li>
<span> interrupt service routine (<span title="ISR: Interrupt Service Routine" class="terminologydef" style="cursor:help">ISR</span>) function must be qualified with </span><code>OS_INTERRUPT</code> macro;
</li>
<li> <code>TISRW</code> or <code>TISRW_SS</code> object must be declared at the beginning of the ISR. This object involves constructor and destructor that play very important role in the RTOS rescheduling mechanism and integrity. There are two scenarios when entering ISR: switch to separate ISR stack by software or work in current stack. In case of current stack <code>TISRW</code> object must be used, otherwise, in case of separate ISR stack - <code>TISRW_SS</code> object. Due to MSP430 does not support hardware switch to separate ISR stack, the using of separate ISR stack is not recommended.
</li>
</ul>
<p>When <code>TISRW_SS</code> object is used, interrupt body executed in separate ISR stack. This stack occupies the the space that was used by processor's stack before the RTOS starts. 
</p>
<p>Size of this stack is defined through the linker options. It depends on compiler used. See <a href="#Port_implementations">compiler-specific section</a> for details.
</p>
<h2> <span class="mw-headline" id="System_Timer"> System Timer </span>
</h2>
<p>Since v 3.0 scmRTOS allows for user to choose any available timer interrupt vector for System Timer, and fully configure this timer. Again, any port release has default assignment for System Timer. The user can leave this default assignment or override it by analogy with defaults according to project requirements. All project-dependent definitions of System Timer hardware implementation (settings, interrupt vector, etc.) resided in project-dependent part of the RTOS - <code>scmRTOS_TARGET_CFG.h</code> header file.
</p>
<h2> <span class="mw-headline" id="Port_implementations"> Port implementations </span>
</h2>
<p>Currently there are two scmRTOS port implementations for MSP430:
</p>
<ul>
<li> <a href="../articles/MSP430_IAR_Port.html" title="MSP430 IAR Port">IAR Port</a>;
</li>
<li> <a href="../articles/MSP430_GCC_Port.html" title="MSP430 GCC Port"><span><span title="GCC: GNU Compiler Collection" class="terminologydef" style="cursor:help">GCC</span> Port</span></a>.
</li>
</ul>
</body>
</html>

<!-- 
NewPP limit report
Preprocessor node count: 18/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><div id='catlinks' class='catlinks catlinks-allhidden'></div></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../misc/scmrtos.png);"
	    href="../index.html"
	    title="ScmRTOS"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Home"><a href="../index.html">Home</a></li>
	     	      <li id="n-Ports"><a href="../articles/Ports.html">Ports</a></li>
	     	      <li id="n-Releases"><a href="../articles/Releases.html">Releases</a></li>
	     	      <li id="n-Documentation"><a href="../articles/Documentation.html">Documentation</a></li>
	     	      <li id="n-Tools"><a href="../articles/Tools.html">Tools</a></li>
	     	      <li id="n-currentevents"><a href="../articles/scmRTOS%7ECurrent_events.html">Current events</a></li>
	     	      <li id="n-Team"><a href="../articles/Team.html">Team</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-support'>
	  <h5>support</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-help"><a href="../articles/Help%7EContents.html">Help</a></li>
	     	      <li id="n-Browse-Subversion-repository"><a href="http://scmrtos.svn.sourceforge.net/viewvc/scmrtos/">Browse Subversion repository</a></li>
	     	      <li id="n-Downloads"><a href="http://sourceforge.net/projects/scmrtos/files/">Downloads</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-development'>
	  <h5>development</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Bug-tracker"><a href="http://sourceforge.net/tracker/?func=browse&amp;group_id=181958&amp;atid=899286">Bug tracker</a></li>
	     	    </ul>
	  </div>
	</div>
		      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
		  	  	  <li id="f-about"><a href="../articles/scmRTOS%7EAbout.html" title="scmRTOS:About">About scmRTOS</a></li>	  	  	</ul>
      </div>
    </div>
  </body>
</html>
