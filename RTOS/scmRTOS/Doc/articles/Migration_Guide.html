<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- headlinks removed -->
	<link rel="shortcut icon" href="../misc/favicon.ico"/>
    <title>Migration Guide - scmRTOS</title>
    <style type="text/css">/*<![CDATA[*/ @import "../skins/offline/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="../skins/common/commonPrint.css" />
          </head>
  <body
    class="ns-4 ns-subject page-scmRTOS_About">
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	        <h1 class="firstHeading">Migration Guide</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">From scmRTOS</h3>
	    <div id="contentSub"></div>
	    <!-- start content -->
	    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="charset=utf-8"></head>
<body>
<h2> <span class="mw-headline" id="Migration_from_v3_to_v4"> Migration from v3 to v4 </span>
</h2>
<p>There were several features and changes made in v4 that had brought some incompatibility between v3 and v4. Starting from v4, the following coding rules used for scmRTOS source code:
</p>
<ul>
<li> Indent is 4 characters.
</li>
<li> Open bracket of the code block <code>'{'</code> begins on blank line as the first character aligned with the first character (i.e. under it) of operator keyword or function qualifier.
</li>
<li> Function names looks <code>like_this()</code>.
</li>
<li> Variable names looks <code>LikeThis</code>.
</li>
<li> User type names looks <code>TLikeThis</code>.
</li>
<li> Aliases looks <code>like_this_t</code>.
</li>
</ul>
<p>This causes incompatibility with the previous software version. The user has to rename appropriate functions and type names in his code. To simplify the migration process the special header file is offered: <code>scmRTOS_310_compat.h</code>. The file contains some aliases for old type names and a macro <code>scmRTOS_OBSOLETE_NAMES</code>. The macro turns on compatibility mode that allows usage of the most of old names (except process's <code>exec</code> function names). In compatibility mode two types of inline adapter functions defined:
</p>
<ul>
<li> For user code: from old-style names to new-style names (like from <code>Sleep()</code> to <code>sleep()</code>).
</li>
<li> For OS code:   from new-style names to old-style names (like from <code>system_timer_user_hook()</code> to <code>SystemTimerUserHook()</code>)
</li>
</ul>
<p>It should be noted that this <b>compatibility mode is the temporary solution and will be removed in the next release</b>.
</p>
<p>To migrate from v3 to v4 version the user has to:
</p>
<ul>
<li> Rename all mentioned above names according to the new naming conventions.
</li>
<li> Add all necessary macros to the project configuration file - for example, <code>scmRTOS_DEBUG_ENABLE</code> for debug features.
</li>
<li> Define type aliases for timeout and tick count objects (<code>timeout_t</code>, <code>tick_count_t</code>), see release samples for details.
</li>
</ul>
<p>Also, the user can use simplified "two-stage" migration method with enabling of compatibility mode. In this case the following actions have to be carried out: 
</p>
<ul>
<li> Include <code>scmRTOS_310_compat.h</code><span> in project <span title="RTOS: Real Time Operating System;" class="terminologydef" style="cursor:help">RTOS</span> configuration file (</span><code>scmRTOS_CONFIG.h</code>).
</li>
<li> Rename root process functions Exec to exec.
</li>
</ul>
<p><br><span>
See sample #3-Channel of AVR/<span title="GCC: GNU Compiler Collection" class="terminologydef" style="cursor:help">GCC</span>/MEGA (or AVR/IAR/MEGA) for example of using scmRTOS v3.xx oriented code with scmRTOS v4.00 in compatibility mode.
</span></p>
</body>
</html>

<!-- 
NewPP limit report
Preprocessor node count: 2/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->
<div class="printfooter">
</div>
	    <div id="catlinks"><div id='catlinks' class='catlinks catlinks-allhidden'></div></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
      <div id="column-one">
	<div class="portlet" id="p-logo">
	  <a style="background-image: url(../misc/scmrtos.png);"
	    href="../index.html"
	    title="ScmRTOS"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
	  <h5>Navigation</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Home"><a href="../index.html">Home</a></li>
	     	      <li id="n-Ports"><a href="../articles/Ports.html">Ports</a></li>
	     	      <li id="n-Releases"><a href="../articles/Releases.html">Releases</a></li>
	     	      <li id="n-Documentation"><a href="../articles/Documentation.html">Documentation</a></li>
	     	      <li id="n-Tools"><a href="../articles/Tools.html">Tools</a></li>
	     	      <li id="n-currentevents"><a href="../articles/scmRTOS%7ECurrent_events.html">Current events</a></li>
	     	      <li id="n-Team"><a href="../articles/Team.html">Team</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-support'>
	  <h5>support</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-help"><a href="../articles/Help%7EContents.html">Help</a></li>
	     	      <li id="n-Browse-Subversion-repository"><a href="http://scmrtos.svn.sourceforge.net/viewvc/scmrtos/">Browse Subversion repository</a></li>
	     	      <li id="n-Downloads"><a href="http://sourceforge.net/projects/scmrtos/files/">Downloads</a></li>
	     	    </ul>
	  </div>
	</div>
		<div class='portlet' id='p-development'>
	  <h5>development</h5>
	  <div class='pBody'>
	    <ul>
	    	      <li id="n-Bug-tracker"><a href="http://sourceforge.net/tracker/?func=browse&amp;group_id=181958&amp;atid=899286">Bug tracker</a></li>
	     	    </ul>
	  </div>
	</div>
		      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
		  	  	  <li id="f-about"><a href="../articles/scmRTOS%7EAbout.html" title="scmRTOS:About">About scmRTOS</a></li>	  	  	</ul>
      </div>
    </div>
  </body>
</html>
